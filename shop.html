<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="./styles.css" />
    <link 
    rel="stylesheet" 
    href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css" 
    integrity="sha512-iBBXm8fW90+nuLcSKlbmrPcLa0OT92xO1BIsZ+ywDWZCvqsWgccV3gFoRBv0z+8dLJgyAHIhR35VZc2oM/gI1w==" 
    crossorigin="anonymous" 
    referrerpolicy="no-referrer" 
   />
    <title>Hemp Haul CBD Solutions - Shop</title>
  </head>
  <body>
    <header class="header">
      <img src="./Logo.jpg" class="logo">
      <p class="navbarelement"><a href = "index.html">Home</a></p>
      <p class="navbarelement">Shop</p>
      <p class="navbarelement"><a href="./aboutus.html">About</a></p>
      <p class="navbarelement"><a href="./contact.html">Contact</a></p>
      <div class="cartIconContainer">
        <a href="./cart.html" class="cartIcon">
          <i class="fas fa-shopping-cart"><span class="cart-count"></span></i>
          <p class="emptyCartMessage2">Your cart is empty.</p>
          <div class="dropdown-content">
            <div class="product-Info">
              <img class="dropImg">
              <div class="productValues">
               <a class="nameValues">Product name</a>
               <span class="QPvalues">(val - product quantity) x ProductPrice</span>
              </div>
              <button>X</button>
            </div>
            <p class="dropdownSubtotal">Subtotal: (price of all quanitity * products in cart)</p>
            <div class="dropdownButtons">
              <a href="cart.html" class="dropdownCartButton">View Cart</a>
              <a href="checkout.html" class="dropdownCheckOutButton">Check Out</a>
            </div>
          </div>
        </a>
      </div>
    </header>
    <!-- working section -->
    <section class="shopPhoto">
      <div class="opaque-background"></div>
      <div class="overlay-text2">
        <h1>Shop CBD and Delta-8 Products</h1>
        <p><a href="./index.html">Home </a>> Shop</p>
      </div>
    </section>
        <section class="body2shop">
            <img src="./logo2.png" class="body2logo">
            <p class="shopbody2text"><a href="index.html">"Hemp Haul</a> is proud to bring you our curated collection of cannabis products."</p>
            <p class="shopbody2text"> "Shop CBC, CBD, CBG, CBN, Delta-8-THC, Delta-9-THC, Delta-10-THC, HHC, and High-THCa products online with confidence."</p>
            <img src="./hempleaf.png" class="hempleaf3">
            <h2 class="category-title" style="font-weight:normal">All Products</h2>
            <div class="product-row">
              <a href="./Product1.html"><div class="product">
                <img src="./cbdproduct1.png">
                <h2 style="font-weight:normal" class="prodTxt">DeltaDaze Elixir</h2>
                <p class="prodTxt">$34.95</p>
                <a href="./Product1.html" class="buy-button">Buy Now</a>
              </div></a>
              <a href="./Product2.html"><div class="product">
                <img src="./cbdproduct2.png">
                <h2 style="font-weight:normal" class="prodTxt">DeltaHarmony Tonic</h2>
                <p class="prodTxt">$24.95</p>
                <a href="./Product2.html" class="buy-button">Buy Now</a>
              </div></a>
              <hr class="dividerShop">
              <a href="./Product3.html"><div class="product">
                <img src="./cbdproduct3.png">
                <h2 class="prodTxt" style="font-weight:normal">TranquilDelta Synergy</h2>
                <p class="prodTxt">$19.95</p>
                <a href="./Product3.html" class="buy-button">Buy Now</a>
              </div></a>
              <a href="./Product4.html"><div class="product">
                <img src="./cbdproduct4.png">
                <h2 class="prodTxt" style="font-weight:normal">SereneDelta Essence</h2>
                <p class="prodTxt">$44.95</p>
                <a href="./Product4.html" class="buy-button">Buy Now</a>
              </div></a>
              <hr class="dividerShop">
              <hr class="bigDivider">
            </div>
            <div class="product-row">
              <a href="./Product5.html"><div class="product">
                <img src="./cbdproduct5.png">
                <h2 class="prodTxt" style="font-weight:normal">Heavenly Herbal Bliss Bites</h2>
                <p class="prodTxt">$44.95</p>
                <a href="./Product5.html" class="buy-button">Buy Now</a>
              </div></a>
              <a href="./Product6.html"><div class="product">
                <img src="./cbdproduct6.png">
                <h2 class="prodTxt" style="font-weight:normal">The D8 Bakery Tranquil Treats</h2>
                <p class="prodTxt">$19.95</p>
                <a href="./Product6.html" class="buy-button">Buy Now</a>
              </div></a>
              <hr class="dividerShop">
              <a href="./Product7.html"><div class="product">
                <img src="./cbdproduct7.png">
                <h2 class="prodTxt" style="font-weight:normal">ZenZest ChocoCanna</h2>
                <p class="prodTxt">$14.95</p>
                <a href="./Product7.html" class="buy-button">Buy Now</a>
              </div></a>
              <a href="./Product8.html"><div class="product">
                <img src="./cbdproduct8.png">
                <h2 class="prodTxt" style="font-weight:normal">Cloud9 Mellow Munchies</h2>
                <p class="prodTxt">$24.95</p>
                <a href="./Product8.html" class="buy-button">Buy Now</a>
              </div></a>
            </div>
            <div class="emailform">
              <img src="./airplane.png" alt="Paper Airplane" class="airplane-img">
              <p class="promo-text">Want to receive discounts, promos, special offers, and 20% off your next purchase?</p>
              <input type="text" id="email-field" placeholder="Enter your email...">
              <button class="signup-button">Sign up</button>
            </div>
            </section>
            <div class="body4">
              <img src="./Logo.jpg" alt="logo" class="logo3">
              <h1 class="indexh1">Hemp Haul</h1>
              <p class="centered-text1">Our mission is to serve the highest quality cannabis products online. Shop CBD, CBC, CBG, CBN, Delta-8-THC, Delta-9-THC, Delta-10-THC, HHC, and High-THCa products with confidence. Customer Satisfaction is of the highest importance. Please don’t hesitate to reach out. Thanks for shopping Hemp Haul!</p>
              <hr class="divider">
              <p class="right-aligned-text">Disclaimer: HempHaul will not be held responsible for any claims or testimonials regarding medical efficacy of any of our products. The FDA (Food and Drug Administration) has not evaluated any of these statements, nor have the claims been confirmed by FDA-acknowledged research. Neither our staff nor our products are intended to diagnose, cure, prevent, or treat any disease or medical condition. Please consult your physician before including any of our products in your wellness plan.</p>
              <p class="copyright">Hemp Haul © 2023. All Rights Reserved.</p>
           </div>
      <script>

        document.addEventListener('DOMContentLoaded', function() {
          updateCartDropdown();
          updateCartCount();
        });
      
        document.querySelector('.add-to-cart-btn').addEventListener('click', function() {
          // get product info
          var productName = document.querySelector('.productHeader').innerText;
          var productPrice = document.querySelector('.productPrice').innerText;
          var productImgSrc = document.querySelector('.zoom-container img').src;
          var productQuantity = document.querySelector('.quantity').value; // get quantity value
        
          var productPriceNumber = parseFloat(productPrice.replace('$', ''));  // convert the price to a number
        
          var product = {
            name: productName,
            price: productPriceNumber,
            quantity: parseInt(productQuantity),  // set quantity from input
            imgSrc: productImgSrc
          };
        
          addToCart(product);
        });
        
        
      
          function addToCart(product) {
              // get the current cart from localStorage
              var cart = JSON.parse(localStorage.getItem('cart')) || [];
          
              // check if product already exists in the cart
              var existingProduct = cart.find(function(item) {
                  return item.name === product.name;
              });
          
              if (existingProduct) {
                  // if product exists, increment quantity
                  existingProduct.quantity += product.quantity;
              } else {
                  // if product doesn't exist, add it to the cart
                  cart.push(product);
              }
          
              // store the updated cart back into localStorage
              localStorage.setItem('cart', JSON.stringify(cart));
              updateCartCount();
              updateCartDropdown();
          }
      
          function updateCartCount() {
            var cart = JSON.parse(localStorage.getItem('cart')) || [];
            var totalQuantity = cart.reduce(function(total, item) {
              return total + item.quantity;
            }, 0);
          
            document.querySelector('.cart-count').innerText = totalQuantity;
          }
      
      
          function createCartItemHTML(product) {
            return `
            <div class="product-Info">
              <div class="product-details">
              <img src="${product.imgSrc}" alt="${product.name}">
              <div class="productValues">
                <a href="#" class="nameValues">${product.name}</a>
                <span class="QPvalues">${product.quantity} x $${product.price}</span>
              </div>
            </div>
              <button class="remove-item" data-product="${product.name}">X</button>
            </div>
            `;
          }
      
          function updateCartDropdown() {
            // get cart from local storage
            var cart = JSON.parse(localStorage.getItem('cart')) || [];
          
            // get dropdown content element
            var dropdownContent = document.querySelector('.dropdown-content');
          
            // clear previous cart items from the dropdown
            dropdownContent.innerHTML = '';
          
            // get the empty message element
            var emptyMessage = document.querySelector('.emptyCartMessage2');
          
            // check if the cart is empty
            if (cart.length === 0) {
              // if the cart is empty, show the empty message and return early to exit the function
              dropdownContent.innerHTML = '<p class="emptyMessage2">Your cart is empty.</p>';
            } else {
              // create HTML for each product in the cart
              cart.forEach(function(product) {
                var productHTML = createCartItemHTML(product);
                dropdownContent.innerHTML += productHTML;
              });
          
              // calculate and display total price
              var totalPrice = cart.reduce(function(sum, product) {
                return sum + product.price * product.quantity;
              }, 0);
          
              dropdownContent.innerHTML += `<p class="dropdownSubtotal">Subtotal: $${totalPrice.toFixed(2)}</p>`;
            
              var dropdownButtons = document.createElement('div');
              dropdownButtons.className = 'dropdownButtons';
              dropdownButtons.innerHTML = `
                <a href="cart.html" class="dropdownCartButton">View Cart</a>
                <a href="checkout.html" class="dropdownCheckOutButton">Check Out</a>
              `;
              dropdownContent.appendChild(dropdownButtons);
            }
          }
          
          
          document.querySelector('.dropdown-content').addEventListener('click', function(event) {
            if (event.target.classList.contains('remove-item')) {
              var productName = event.target.dataset.product;
              removeFromCart(productName);
            }
          });
          
          function removeFromCart(productName) {
            var cart = JSON.parse(localStorage.getItem('cart')) || [];
            var updatedCart = cart.filter(function(product) {
              return product.name !== productName;
            });
            localStorage.setItem('cart', JSON.stringify(updatedCart));
            updateCartDropdown();
            updateCartCount();
          }
      
      </script>
  </body>
</html>